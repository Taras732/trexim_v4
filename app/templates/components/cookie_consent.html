<!-- Cookie Consent Banner -->
<div x-data="cookieConsent()" x-show="showBanner" x-cloak
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="opacity-0 translate-y-4"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 translate-y-4"
     class="fixed bottom-0 left-0 right-0 z-50 p-4 bg-white border-t border-gray-200 shadow-lg md:p-6">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex-1 text-center md:text-left">
            <p class="text-gray-700 text-sm md:text-base">
                Ми використовуємо cookies для покращення вашого досвіду на сайті та збору анонімної статистики.
                <a href="/privacy" class="text-orange-500 hover:underline">Політика конфіденційності</a>
            </p>
        </div>
        <div class="flex gap-3">
            <button @click="decline()"
                    class="px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
                Відхилити
            </button>
            <button @click="accept()"
                    class="px-6 py-2 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition">
                Прийняти
            </button>
        </div>
    </div>
</div>

<script>
function cookieConsent() {
    return {
        showBanner: false,

        init() {
            // Check if consent was already given
            const consent = localStorage.getItem('analytics_consent');
            if (!consent) {
                // Show banner after a short delay
                setTimeout(() => {
                    this.showBanner = true;
                }, 1000);
            } else if (consent === 'accepted') {
                // Initialize extended tracking
                this.initTracking();
            }
        },

        accept() {
            localStorage.setItem('analytics_consent', 'accepted');
            document.cookie = 'analytics_consent=accepted; path=/; max-age=31536000; SameSite=Lax';
            this.showBanner = false;
            this.initTracking();
        },

        decline() {
            localStorage.setItem('analytics_consent', 'declined');
            document.cookie = 'analytics_consent=declined; path=/; max-age=31536000; SameSite=Lax';
            this.showBanner = false;
        },

        initTracking() {
            // Load extended analytics if consent given
            if (typeof TreximAnalytics !== 'undefined') {
                TreximAnalytics.init();
            }
        }
    }
}
</script>
